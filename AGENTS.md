# Repository Guidelines

## Project Structure & Module Organization
- `src/` contains the app: `components/` (UI building blocks), `pages/` (routes), `services/` (API + parsing), `store/` (Zustand state), `utils/` and shared `styles/`. Tests live alongside code in `__tests__/` plus `src/test/mocks/` for MSW handlers.
- `e2e/` holds Playwright journeys and accessibility/responsiveness suites; config in `playwright.config.ts`.
- `api/news/` are serverless endpoints for deployments; `dev-server.js` mirrors them for local RSS fetching on port 3001.
- `public/` static assets; `dist/` build output is generated by Vite. Avoid editing generated files.

## Build, Test, and Development Commands
- `npm run dev` — runs the Express RSS proxy (`dev-server.js`) and Vite dev server together.
- `npm run dev:server` / `npm run dev:vite` — start either side individually.
- `npm run build` — type-check (`tsc -b`) then production bundle with Vite.
- `npm run preview` — serve the built app locally to verify production output.
- `npm run lint` — ESLint across the repo; autofix runs via lint-staged on staged TS/JS files.
- `npm test` — Vitest unit/component suite; `npm run test:coverage` for coverage; `npm run test:ui` for interactive runner.
- `npx playwright test e2e/ --headed` — execute E2E smoke/workflow/accessibility/responsive suites; `npx playwright show-report` to inspect results.

## Coding Style & Naming Conventions
- TypeScript + React (function components). Use PascalCase for components/contexts, camelCase for functions/vars, `useX` for hooks, and `*Store` for Zustand stores.
- Prefer 2-space indentation, semicolons, and single quotes per existing codebase.
- Keep components small and colocate tests in `__tests__` or `*.test.ts(x)`. Favor pure functions in `services/` and `utils/`.
- Tailwind is available; define shared styles in `src/styles` when utility classes become verbose.

## Testing Guidelines
- Unit/component tests: Vitest + React Testing Library. Name files `*.test.ts` or place under `__tests__/`. Mock network calls with MSW handlers from `src/test/mocks/`.
- E2E: Playwright specs in `e2e/`; run in debug/headed when diagnosing flakiness. Regenerate reports before merging.
- Aim to keep or raise coverage reported by `npm run test:coverage`; add focused tests for new branches and side effects (stores, services).

## Commit & Pull Request Guidelines
- Follow Conventional Commits used in history (e.g., `fix(ui): convert data URL to Blob URL`). Use meaningful scopes like `ui`, `store`, `service`, `build`.
- PRs should include: brief summary, linked issue/shortcut, test evidence (`npm test`, Playwright if UI touches), and before/after screenshots or screen recordings for visible changes.
- Avoid committing `.env*` files; document required variables instead (dev server loads `.env` and `.env.development`).

## Security & Configuration Notes
- Do not log or commit API keys. Keep `.env*` local; use `.env.example` if adding new variables.
- The local news API fetches external RSS; handle errors defensively and sanitize output to avoid injecting untrusted HTML.
